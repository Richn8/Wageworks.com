<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
    <controlSources>
      <source mode="on" namespace="Vista.Foundation.Solr.SpatialSearch.CustomControls" assembly="Vista.Foundation.Solr.SpatialSearch" prefix="customfields" />
    </controlSources>
    <!--<contentSearch>
      <indexConfigurations>
        <defaultSolrIndexConfiguration>
          <fieldMap>
            <typeMatches>
              <typeMatch typeName="geoLocation" type="Vista.Foundation.Solr.SpatialSearch.SpatialPoint, Vista.Foundation.Solr.SpatialSearch" fieldNameFormat="{0}_rpt" settingType="Sitecore.ContentSearch.SolrProvider.SolrSearchFieldConfiguration, Sitecore.ContentSearch.SolrProvider" />
            </typeMatches>
            <fieldTypes>
              <fieldType fieldTypeName="latlon" returnType="geoLocation" />
            </fieldTypes>
          </fieldMap>
          <fieldReaders>
            <mapFieldByTypeName>
              <fieldReader fieldTypeName="latlon" fieldReaderType="Vista.Foundation.Solr.SpatialSearch.FieldReaders.SpatialPointFieldReader, Vista.Foundation.Solr.SpatialSearch" />
            </mapFieldByTypeName>
          </fieldReaders>
          <indexFieldStorageValueFormatter>
          <converters>
            <converter handlesType="Vista.Foundation.Solr.SpatialSearch.SpatialPoint,  Vista.Foundation.Solr.SpatialSearch"  typeConverter="Vista.Foundation.Solr.SpatialSearch.Converters.SpatialPointValueConverter, Vista.Foundation.Solr.SpatialSearch" />
          </converters>
          </indexFieldStorageValueFormatter>
        </defaultSolrIndexConfiguration>
      </indexConfigurations>
      <configuration>
        <indexes hint="list:AddIndex">
          <index id="sitecore_master_index">
            <patch:attribute name="type">Vista.Foundation.Solr.SpatialSearch.Provider.SwitchOnRebuildSolrSearchIndexWithSpatial, Vista.Foundation.Solr.SpatialSearch</patch:attribute>
            <param desc="rebuildcore" patch:after="param[@desc='core']">$(solrPrefix)_$(id)_sec</param>
          </index>
          <index id="sitecore_web_index">
            <patch:attribute name="type">Vista.Foundation.Solr.SpatialSearch.Provider.SwitchOnRebuildSolrSearchIndexWithSpatial, Vista.Foundation.Solr.SpatialSearch</patch:attribute>
            <param desc="rebuildcore" patch:after="param[@desc='core']">$(solrPrefix)_$(id)_sec</param>
          </index>
        </indexes>
      </configuration>
    </contentSearch>-->
  </sitecore>
</configuration>
